# 秒传生成相关

秒传脚本自带生成秒传链接的功能, 此文档用于帮助用户解决相关问题. 

PS: 文档将持续/不定时更新, 更新时间: 21.1.13

- [秒传生成相关](#秒传生成相关)
	- [注意事项](#注意事项)
	- [常见问题及解决方法](#常见问题及解决方法)
		- [md5获取失败/秒传无效](#md5获取失败/秒传无效)
			- [解决方法 (秒传无效)](#解决方法-秒传无效)
			- [预防方法 (秒传无效)](#预防方法-秒传无效)
		- [文件和谐](#文件和谐)
			- [解决方法 (文件和谐)](#解决方法-文件和谐)
			- [预防方法 (文件和谐)](#预防方法-文件和谐)
	- [文件压缩方法](#文件压缩方法)
		- [工具选择及选项配置](#压缩选项配置)
			- [WinRAR](#WinRAR)
			- [好压](#好压)
			- [7zip](#7zip)
		- [双层压缩(可选)](#双层压缩-可选)
		- [测试压缩文件](#测试压缩文件)
	- [PCS-Go客户端使用方法](#PCS-Go客户端使用方法)
	- [修改文件md5方法](#修改文件md5方法)
		- [重新压缩](#重新压缩)
		- [md5修改工具](#md5修改工具)

## 注意事项
1. 2020年10月后上传的文件, 被和谐后, 源文件(首次上传的文件)可能仍然可以正常下载/分享, 但秒传转存的文件则报和谐, 故在测试文件和谐时, 应以转存的文件为准.

## 常见问题及解决方法

### md5获取失败/秒传无效
生成秒传及转存秒传报对应弹窗即秒传无效, 上传文件过程中网络波动可能会造成该情况。

#### 解决方法 (秒传无效)
1. 修改文件的md5，参考[修改文件md5方法](#修改文件md5方法)，
2. 使用 “度盘客户端” 或 “[PCS-Go客户端](#PCS-Go客户端使用方法)(推荐)” 上传文件, 不推荐使用度盘网页端上传
3. 重新生成上传文件的秒传

#### 预防方法 (秒传无效)
1. 单个文件的大小控制在2G以内, 过大的文件可分卷压缩
2. 见上方 "解决方法" 2.

### 文件和谐
生成秒传时提示如下弹窗, 或者下载文件时报和谐, 即文件被和谐, 文件被和谐后没有任何补救方法.
![avatar](https://pic.rmb.bdstatic.com/bjh/2da6fe7376b1097cb2061d48df8a679f.png)

#### 解决方法 (文件和谐)
方法同 [解决方法(秒传无效)](#解决方法-秒传无效)

#### 预防方法 (文件和谐)
1. 将文件压缩为不支持在线解压格式, 方法见[文件压缩方法](#文件压缩方法)
2. 不通过创建分享链的方式分享

## 文件压缩方法

### 工具选择及选项配置
篇幅有限仅列举三种工具, 使用其他工具可自行参考. 防在线解压涉及的压缩选项有两个, 分别是 "固实压缩" 和 "加密文件名".

#### WinRAR
用于压缩rar格式的压缩包, 请前往[WinRAR官网](http://www.winrar.com.cn/)下载安装最新, 请务必使用最新版本, 使用旧版本WinRAR压缩的rar4格式是无法防止在线解压的.

- 选项配置
	1. 固实压缩
	2. 加密文件名

### 好压
用于压缩7z格式的压缩包, 请前往[好压官网](https://haozip.2345.cc/),下载安装最新版

- 选项配置
	1. 固实压缩
	
	![avatar](https://pic.rmb.bdstatic.com/bjh/60443511e18e787a987b9d208c758550.png)

	2. 加密文件名
	
	![avatar](https://pic.rmb.bdstatic.com/bjh/863823e535d37c919a6f6812f8018bc9.png)

### 7zip
用于压缩7z格式的压缩包, 请前往[7zip](https://www.7-zip.org/),下载安装最新版

- 选项配置
	- 固实压缩&加密文件名
	![avatar](https://pic.rmb.bdstatic.com/bjh/6c4921617256946086b6d9eb881562a6.png)


### 双层压缩(可选)
如题, 使用上述相同的压缩选项将压缩包再压缩一次, 据说可以有效防和谐, 一般使用单层压缩的防和谐效果已经足够.

### 测试压缩文件
在度盘客户端/网页端中点击文件即可测试在线解压(自备会员), 7z文件注意先将后缀改为rar再测试.

若测试显示下图所示弹窗(且不提示输入解压密码), 即不支持在线解压, 即可以放心使用自己的压缩工具和选项配置.
![avatar](https://pic.rmb.bdstatic.com/bjh/eb5e4c6ed0e93b12f00f6bbcd8acf540.png)

## PCS-Go客户端使用方法
